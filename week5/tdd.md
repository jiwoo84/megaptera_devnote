# TDD (Test Driven Development)

## í•™ìŠµ í‚¤ì›Œë“œ

- TDDë€
- Jest
- Describe - Context - It íŒ¨í„´
- ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë€

## ğŸ€ í…ŒìŠ¤íŠ¸ë€?

í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ì—¬ ì˜¤ë¥˜ê³¼ ê²°í•¨ì„ ê²€ì¦í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ì ˆì°¨

### í…ŒìŠ¤íŠ¸ì˜ ì¢…ë¥˜ (feat. í…ŒìŠ¤íŒ… íŠ¸ë¡œí”¼)

`Static í…ŒìŠ¤íŠ¸` : ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šê³  í•˜ëŠ” í…ŒìŠ¤íŠ¸

- êµ¬ë¬¸ ì˜¤ë¥˜, ë‚˜ìœ ì½”ë“œ ìŠ¤íƒ€ì¼ ë“±ì„ ê²€ì¦
- ex) ESlint, Typescript

`Unit í…ŒìŠ¤íŠ¸` : ê¸°ëŠ¥ì˜ ê°œë³„ì ì¸ ë‹¨ìœ„(ê¸°ëŠ¥, ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„)ë¥¼ ë–¼ì–´ ë¶„ë¦¬ëœ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²ƒ

- ì¥ì : ë‹¨ìœ„ê°€ ì‘ì•„ì„œ ì‘ì„± ë¹„ìš©ì´ ë‚®ê³  ì‹¤í–‰ì†ë„ê°€ ë¹ ë¦„
- ex) jest

`Integration í…ŒìŠ¤íŠ¸` : ì–´í”Œì˜ ì—¬ëŸ¬ ë¶€ë¶„ë“¤ì´ í†µí•©ë˜ì–´ ì œëŒ€ë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸

- ì£¼ë¡œ ë‹¨ìœ„ë³´ë‹¤ í° ë²”ìœ„(í˜ì´ì§€) í…ŒìŠ¤íŠ¸
- ex) jest, RTL

`E2E í…ŒìŠ¤íŠ¸` : ì‹¤ì œ ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ì¡°ê±´ì—ì„œ ì „ì²´ ì‹œìŠ¤í…œì„ í…ŒìŠ¤íŠ¸

- API ì„œë²„, DB ë“±ì˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ì—¬ í†µí•©ëœ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
- ë¹„ìš©ì´ ë§ì´ ë“¤ê³  ì†ë„ë„ ëŠë¦¼
- ex) Cypress, Selenium

### í”„ë¡ íŠ¸ì—”ë“œì˜ í…ŒìŠ¤íŠ¸

ê²°êµ­ ëª©ì ì€ í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ì•„ë‹Œ ì˜¬ë°”ë¥¸ êµ¬í˜„ì´ë‹ˆ, ì œí•œëœ ë¦¬ì†ŒìŠ¤ë¡œ í…ŒìŠ¤íŒ… íš¨ìœ¨ì„ ë†’ì´ê³  ì‹¶ë‹¤ë©´ Integration í…ŒìŠ¤íŠ¸ë¥¼ ì£¼ë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

`API ì„œë²„ í†µì‹ `

- ë¸Œë¼ìš°ì €: cypress ì‚¬ìš©
- Node.js: testing-libraryì—ì„œ ì œê³µí•˜ëŠ” `fireEvent`, `userEvent` ì‚¬ìš©

`ì‚¬ìš©ì ì´ë²¤íŠ¸ ì²˜ë¦¬` : ì‹¤ì œ API || mock API ì‚¬ìš© (jestë¡œ êµ¬í˜„ ê°€ëŠ¥)

`ì‹œê°ì  ìš”ì†Œ`

- ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸: html êµ¬ì¡°ê°€ ì˜ë„í•œ ëŒ€ë¡œ ë‚˜íƒ€ë‚˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ (jest, storybook)
- ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸: html + css ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤ì œë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ì˜ë„í•œëŒ€ë¡œ ë Œë”ë§ ë˜ëŠ”ì§€ í™•ì¸ (storybook)

### í…ŒìŠ¤íŒ… í™˜ê²½ (ê·¸ë˜ì„œ ë­ë¡œ í•´ì•¼ ë¼?)

**ë¸Œë¼ìš°ì €**

- Node.jsì— ë¹„í•´ ë¬´ê²ê³  ì´ˆê¸° êµ¬ë™ì†ë„ê°€ ëŠë¦¬ë‹¤.
- ì‚¬ìš©í•˜ê¸° ìœ„í•´ Headlessê°™ì€ ë¸Œë¼ìš°ì €ì˜ ë³„ë„ ì„¤ì¹˜ê°€ í•„ìš”í•¨.
- ex> Karma, Selenium, Cypress
a

**Node.js**

- ì„¤ì¹˜ ë° ì‹¤í–‰ì´ ê°„ë‹¨í•˜ê³  ì†ë„ê°€ ë¹ ë¥´ë‹¤.
- ëª¨ë“ˆ ë‹¨ìœ„ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- DOM, BOM APIê°€ ì—†ìŒ => ê·¸ë˜ì„œ jsdomì„ ì‚¬ìš©í•˜ì§€ë§Œ ë¸Œë¼ìš°ì € ë™ì‘ì„ ë°±í¼ êµ¬í˜„í•˜ì§„ ëª»í•¨
- ex) Jest, Mocha

> ê²°ë¡ : ë¸Œë¼ìš°ì €ëŠ” í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì§• í…ŒìŠ¤íŠ¸ê°€ 'ë°˜ë“œì‹œ' í•„ìš”í•˜ê±°ë‚˜, ë¸Œë¼ìš°ì €ì˜ ì‹¤ì œ ë™ì‘ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ê³ ë ¤í•˜ê³  ì™ ë§Œí•˜ë©´ Node.js í™˜ê²½ì—ì„œ í•´ë¼

### ì£¼ì˜ì‚¬í•­

1. ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í†µí•´ UI / ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸ ë¶„ë¦¬í•  ê²ƒ
    - UIë¥¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë³´ë‹¤ ìˆ˜ì •ì´ ì¦ê¸° ë•Œë¬¸ì— í¼ì§í¼ì§í•˜ê²Œ í…ŒìŠ¤íŠ¸ ì§¤ ê²ƒ
2. ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì„ ê¼¼ê¼¼í•˜ê²Œ í…ŒìŠ¤íŠ¸ ì§œëŠ” ê²ƒì´ ì¤‘ìš”í•¨

## ğŸ€ TDDë€?

í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±í•˜ëŠ”, ì¦‰ êµ¬í˜„ë³´ë‹¤ ì¸í„°í˜ì´ìŠ¤ì™€ ìŠ¤í™ì„ ë¨¼ì € ì •ì˜í•¨ìœ¼ë¡œì¨ ê°œë°œì„ ì§„í–‰í•˜ëŠ” ë°©ì‹

### TDD Cycle

**1. Red**

ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±. ì¸í„°í˜ì´ìŠ¤ì™€ ìŠ¤í™ì— ì§‘ì¤‘í•œë‹¤.

**2. Green**

ì¬ë¹¨ë¦¬ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¨ë‹¤. ì˜¬ë°”ë¥¸ ë°©ë²•ì´ ì•„ë‹ˆì–´ë„ ê´œì°®ë‹¤.

ì–´ë µë‹¤ë©´ 1ë¡œ ëŒì•„ê°€ ë” ì‘ê³  ì‰¬ìš´ ë¬¸ì œë¥¼ ì •ì˜í•´ì•¼í•¨

**3. Refactor**

ë¦¬íŒ©í„°ë§ì„ í†µí•´ ì½”ë“œë¥¼ ì˜¬ë°”ë¥´ê²Œ ë§Œë“¬ (ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„)

ì´ë¥¼ ìœ„í•´ ì½”ë“œì˜ ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ê³  ì¤‘ë³µì„ ì°¾ì•„ ì œê±°í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•¨

[ì˜ˆì‹œ: Jestë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ TDD ì˜ˆì œ](https://github.com/ahastudio/til/blob/main/jest/20201204-simple-tdd-example.md)

>ì´ ê³¼ì •ë“¤ì´ ìµìˆ™í•˜ì§€ ì•Šìœ¼ë©´ TDDë¥¼ í•˜ëŠ” ê²Œ ê±°ì˜ ë¶ˆê°€ëŠ¥í•˜ê³ , ì¼ë°˜ì ì¸ ê°œë°œ ë˜ëŠ” í´ë¦° ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒ ë˜í•œ ë§¤ìš° í˜ë“¬

## ğŸ€ Jest

í˜ì´ìŠ¤ë¶ì—ì„œ ë§Œë“  ìë°”ìŠ¤í¬ë¦½íŠ¸ í”„ë ˆì„ì›Œí¬, ê±°ì˜ ëª¨ë“  ê²ƒì„ ê°–ì¶”ê³  ìˆì–´ì„œ ëŒ€ì„¸

- ìµœê·¼ì—ëŠ” ë°±ì—”ë“œì—ì„œë„ ì‚¬ìš©í•˜ëŠ” ì¶”ì„¸
- Mochaì™€ Chaiì²˜ëŸ¼ RSpecì˜ describe-it ì§€ì›, expectë¡œ ë‹¨ì–¸(assertion) ê°€ëŠ¥
- Mockingë„ ë‹¤ì–‘í•œ ë ˆë²¨ì—ì„œ ì‰½ê²Œ ì‚¬ìš© ê°€ëŠ¥
- Jest ë“±ì¥ ì „ì—ëŠ” ì—¬ëŸ¬ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¡°í•©í•´ì„œ ì‚¬ìš©í–ˆì—ˆìŒ (ì˜ˆë¡œ Mochaë‚˜ Jasminì„ test runnerë¡œ ì‚¬ìš©í•˜ê³ , Chaië‚˜ Expectê°™ì€ Test Mathcerê³¼ Sinon, Testdouble ê°™ì€ Test Mock ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ í•„ìš”í–ˆìŒ)  
    => Jest = test runner + test mathcer + test mock (í•˜ë‚˜ë§Œ ì„¤ì¹˜í•˜ë©´ ëª¨ë“  í”„ë ˆì„ì›Œí¬ ì œê³µ)
- <details>
    <summary><b>ì°¸ê³ ìë£Œ</b></summary>

  - [BETTER SPECS](https://www.betterspecs.org/) â†’ RSpec ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ëª¨ìŒ. ê·¸ëŒ€ë¡œ ì“¸ ìˆ˜ëŠ” ì—†ì§€ë§Œ, ì°¸ê³ í•˜ì.
  - [Ginkgo - Go ì–¸ì–´ ê°œë°œìë¥¼ ìœ„í•œ BDD í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬](https://youtu.be/gfTsSBRvdqI) (Go ì–¸ì–´ ì‚¬ë¡€)
  - [JUnit5ë¡œ ê³„ì¸µ êµ¬ì¡°ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°](https://johngrib.github.io/wiki/junit5-nested/) (Java ì–¸ì–´ ì‚¬ë¡€)
  - [Letâ€™s RSpec](https://github.com/ahastudio/til/blob/main/ruby/20161206-rspec-let.md) â†’ JestëŠ” RSpecì˜ let ê°™ì€ ê±¸ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, í•µì‹¬ ì•„ì´ë””ì–´ë¥¼ ê°€ì ¸ì™€ì„œ ì ë‹¹í•œ ìˆ˜ì¤€ì—ì„œ ì˜ ì¨ì•¼ í•œë‹¤.
  - [Given-When-Then](https://www.notion.so/Given-When-Then-c4b62b46710942a181a6d477e502e458)

</details>

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

1. `íŒŒì¼ëª….test.ts` ê°™ì€ í˜•íƒœì˜ ts/ js/ tsx/ jsx íŒŒì¼ì„ ë§Œë“ ë‹¤
2. ì‹¤í–‰ ëª…ë ¹ì–´ (scriptì— ì €ì¥í•´ì„œ ì‚¬ìš©í•˜ë©´ í¸í•¨)

  ```bash
  # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  npx jest

  # ì €ì¥í•  ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  npx jest --watchAll
  ```

- swcê°€ íƒ€ì…ì„ ì œì™¸í•˜ê³  í…ŒìŠ¤íŒ…í•˜ê¸° ë•Œë¬¸ì— íƒ€ì… ê²€ì‚¬ëŠ” ë”°ë¡œ tsë¡œ ëŒë ¤ì•¼í•¨  
  `npx tsc --noEmit`

### ì‘ì„± ê³¼ì • í…œí”Œë¦¿ - `Given-When-Then`

í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ë°©ë²• í…œí”Œë¦¿ì¸ Given-When-Thenì— ë”°ë¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì´ˆë°˜ì—ëŠ” ì‰¬ìš¸ ìˆ˜ ìˆìŒ

1. `Given` : ì–´ë–¤ ìš”ì†Œê°€ ê°–ì¶°ì§€ë©´ (ë™ì‘ì— í•„ìš”í•œ ìš”ì†Œ)
2. `When` : ì–´ë–¤ ì‹œê°„ì—, ì–´ë–¤ ê²ƒì´ íŠ¸ë¦¬ê±°ê°€ ë˜ì–´
3. `Then` : ìµœì¢… ë™ì‘ì„ í•œë‹¤

ì´ ì„¸ ê°€ì§€ë¥¼ ê°„ë‹¨í•˜ê²Œ ì •ì˜í•˜ê³ , ë””í…Œì¼í•˜ê²Œ ì‘ì„±í•˜ì—¬ ì™„ì„±ì‹œí‚¤ë©´ ë¨

> [ì˜ˆì œê°€ ë‚˜ì˜¨ ì°¸ê³ ê¸€](https://github.com/ahastudio/til/blob/main/blog/2018/12-08-given-when-then.md)

### ì‘ì„± ë°©ì‹

í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ í¬ê²Œ ë‘ ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤:

**1.test í•¨ìˆ˜ë¡œ ê°œë³„ í…ŒìŠ¤íŠ¸ë¥¼ ë‚˜ì—´***

```jsx
describe("add(ì£¼ì–´)", () => {
  it("returns sum of two numbers(ê²°ê³¼)", () => {
    expect(add(1, 2)).toBe(3);
  });
});
```

**2. BDD ìŠ¤íƒ€ì¼ë¡œ ì£¼ì²´-í–‰ìœ„ ì¤‘ì‹¬ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì¡°ì§í™”**

í…ŒìŠ¤íŠ¸ ëŒ€ìƒê³¼ í–‰ìœ„ë¥¼ ëª…í™•íˆ ë“œëŸ¬ë‚´ì–´ í‘œí˜„ë ¥ì´ ì¢‹ì•„ì§€ê³ , ì¢€ ë” ê³ ë¯¼í•  ê¸°íšŒë¥¼ ì œê³µ

```jsx
describe('add(ì£¼ì–´)', () => {
 it('returns sum of two numbers(ê²°ê³¼)', () => {
    expect(add()).toBe(0);
    expect(add(1)).toBe(1);
    expect(add(1, 2)).toBe(3);
    expect(add(1, 2, 3)).toBe(6);
 });
});

// contextë¡œ ì¡°ê±´ë¬¸ ë§Œë“¤ì–´ ë‹¤ì–‘í•œ ìƒí™© ê³ ë ¤í•˜ê¸°
// ìœ„ ì½”ë“œë³´ë‹¤ ì˜ë„ë¥¼ ëª…í™•í•˜ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŒ

// contextê°€ ì œê³µë˜ì§€ ì•Šì•„ describeë¡œ ë§Œë“¬
const context = describe;

describe('add(ì£¼ì–´)', () => {
 context('with no argument(ì¡°ê±´)', () => {
  it('returns zero(ê²°ê³¼)', () => {
   expect(add()).toBe(0);
  });
 });

 context('with only one number', () => {
  it('returns the same number', () => {
   expect(add(1)).toBe(1);
  });
 });

 context('with two numbers', () => {
  it('returns sum of two numbers', () => {
   expect(add(1, 2)).toBe(3);
  });
 });

 context('with three numbers', () => {
  it('returns sum of three numbers', () => {
   expect(add(1, 2, 3)).toBe(6);
  });
 });
});
```
